<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improvement Book</title>
    <style>:root{--primary-blue:#3d8bff;--light-blue:#e7f1ff;--background-color:#f7f8fc;--card-background:#ffffff;--text-primary:#212529;--text-secondary:#6c757d;--border-color:#e9ecef;--shadow:0 4px 15px rgba(0,0,0,0.06);--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}body{font-family:var(--font-family);background-color:var(--background-color);color:var(--text-primary);margin:0;padding-top:60px}.container{max-width:800px;margin:0 auto;padding:1rem}.app-header{position:fixed;top:0;left:0;right:0;display:flex;align-items:center;background-color:var(--card-background);padding:0 1rem;height:60px;border-bottom:1px solid var(--border-color);z-index:1000}.back-arrow{font-size:1.8rem;text-decoration:none;color:var(--text-primary);margin-right:1rem}.app-header h1{font-size:1.2rem;margin:0}.card{background:var(--card-background);border-radius:16px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:var(--shadow)}.btn{display:inline-block;width:100%;box-sizing:border-box;padding:.9rem 1.5rem;border:none;border-radius:50px;font-size:1rem;font-weight:700;cursor:pointer;text-align:center;text-decoration:none;transition:transform .1s ease-out}.btn:active{transform:scale(.98)}.btn-primary{background-color:var(--primary-blue);color:#fff}.btn-secondary{background-color:transparent;color:var(--primary-blue);border:1.5px solid var(--primary-blue)}.chapter-card{display:flex;align-items:center}.chapter-icon{font-size:1.5rem;background-color:var(--light-blue);color:var(--primary-blue);border-radius:50%;min-width:50px;height:50px;display:flex;align-items:center;justify-content:center;margin-right:1rem}.chapter-info h3{margin:0;font-size:1rem}.chapter-info p{margin:.25rem 0 0;color:var(--text-secondary);font-size:.9rem}.chapter-actions{display:flex;margin-top:1rem;gap:1rem}</style>
</head>
<body>
    <header class="app-header">
        <a href="index.html" class="back-arrow">‚Üê</a><h1>Improvement Book</h1>
    </header>
    <div class="container" id="improvement-container"></div>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const improvementBook = JSON.parse(localStorage.getItem('improvementBook')) || {}, container = document.getElementById('improvement-container'), questions = Object.values(improvementBook);
        if (questions.length === 0) { container.innerHTML = '<div class="card" style="text-align:center;"><p>Your improvement book is empty. Great job!</p></div>'; return; }
        const groupedByChapter = {};
        questions.forEach(q => { if (!groupedByChapter[q.chapter]) { groupedByChapter[q.chapter] = []; } groupedByChapter[q.chapter].push(q); });
        container.innerHTML = '';
        for (const chapterName in groupedByChapter) {
            const chapterQuestions = groupedByChapter[chapterName];
            const card = document.createElement('div'); card.className = 'card';
            card.innerHTML = `<div class="chapter-card"><div class="chapter-icon">üìñ</div><div class="chapter-info"><h3>${chapterName}</h3><p>${chapterQuestions.length} Mistakes</p></div></div><div class="chapter-actions"><button class="btn btn-secondary revise-btn">Revise</button><button class="btn btn-primary re-attempt-btn">Re-attempt</button></div>`;
            container.appendChild(card);
            card.querySelector('.re-attempt-btn').addEventListener('click', () => { sessionStorage.setItem('currentQuiz', JSON.stringify(chapterQuestions)); window.location.href = '4_quiz.html'; });
            card.querySelector('.revise-btn').addEventListener('click', () => { alert('Revise feature coming soon!'); });
        }
    });
    </script>
</body>
</html>
